# **클린 아키텍처**  
지난 수십 년간 우리는 시스템 아키텍처와 관련된 여러 가지 아이디어를 봐 왔다. 다음의 내용도 여기에 포함된다.  
  
- 육각형 아키텍처(Hexagonal Architecture): 포트와 어댑터(Ports and Adapters)라고도 알려졌으며 앨리스터 코오번이 개발했다.  
- DCI(Data, Context and Interaction): 제임스 코플리언과 트리그베 린스쿠주가 만들었다.  
- BCF(Boundary-Control-Entity): 이바 야콥슨이 자신의 저서에서 소개했다.  
  
이들 아키텍처는 모두 세부적인 면에서는 다소 차이가 있더라도 그 내용은 상당히 비슷하다. 이들의 목표는 모두 같은데 바로 관심사의 분리(separation of concerns)다. 
이들은 모두 소프트웨어를 계층으로 분리함으로써 관심사의 분리라는 목표를 달성할 수 있었다. 각 아키텍처는 최소한 업무 규칙을 위한 계층 하나와 
사용자와 시스템 인터페이스를 위한 또 다른 계층 하나를 반드시 포함한다.  
  
이들 아키텍처는 모두 시스템이 다음과 같은 특징을 지니도록 만든다.  
  
- 프레임워크 독립성: 아키텍처는 다양한 기능의 라이브러리를 제공하는 소프트웨어, 즉 프레임워크의 존재 여부에 의존하지 않는다. 이를 통해 이러한 
프레임워크를 도구로 사용할 수 있으며 프레임워크가 지닌 제약사항 안으로 시스템을 욱여 넣도록 강제하지 않는다.  
- 테스트 용이성: 업무 규칙은 UI, 데이터베이스, 웹 서버, 또는 여타 외부 요소가 없이도 테스트할 수 있다.  
- UI 독립성: 시스템의 나머지 부분을 변경하지 않고도 UI를 쉽게 변경할 수 있다. 예를 들어 업무 규칙을 변경하지 않은 채 웹 UI를 콘솔 UI로 대체할 
수 있다.  
- 데이터베이스 독립성: 오라클이나 MS SQL 서버를 몽고DB, 빅테이블, 카우치DB 등으로 교체할 수 있다. 업무 규칙은 데이터베이스에 결합되지 않는다.  
- 모든 외부 에이전시에 대한 독립성: 실제로 업무 규칙은 외부 세계와의 인터페이스에 대해 전혀 알지 못한다.  
  
![img.png](image/img.png)  
  
위 그림의 다이어그램은 이들 아키텍처 전부를 싱행 가능한 하나의 아이디어로 통합하려는 시도다.  
  
# **의존성 규칙**  
보통 위 그림에서 각각의 동심원은 소프트웨어에서 서로 다른 영역을 표현한다. 보통 안으로 들어갈수록 고수준의 소프트웨어가 된다. 바깥쪽 원은 메커니즘이고 
안쪽 원은 정책이다.  
  
이러한 아키텍처가 동작하도록 하는 가장 중요한 규칙은 의존성 규칙이다.  
  
- 소스 코드 의존성은 반드시 안쪽으로, 고수준의 정책을 향해야 한다.  
  
내부의 원에 속한 요소는 외부의 원에 속한 어떤 것도 알지 못한다. 특히 내부의 원에 속한 코드는 외부의 원에 선언된 어떤 것에 대해서도 그 이름을 
언급해서는 절대 안 된다. 여기에는 함수, 클래스, 변수, 그리고 소프트웨어 엔티티로 명명되는 모든 것이 포함된다.  
  
같은 이유로 외부의 원에 선언된 데이터 형식도 내부의 원에서 절대로 사용해서는 안 된다. 특히 그 데이터 형식이 외부의 원에 있는 프레임워크가 생성한 
것이라면 더더욱 사용해서는 안 된다. 우리는 외부 원에 위치한 어떤 것도 내부의 원에 영햐을 주지 않기를 바란다.  
  

