# **컴포넌트 결합**  
지금부터 다룰 세 가지 원칙은 컴포넌트 사이의 관계를 설명한다. 이 장에서도 마찬가지로 개발 가능성과 논리적 설계 사이의 균형을 다룬다. 컴포넌트 
구조와 관련된 아키텍처를 침범하는 힘은 기술적이며, 정치적이고, 가변적이다.  
  
# **ADP: 의존성 비순환 원칙**  
- 컴포넌트 의존성 그래프에 순환(cycle)이 있어서는 안 된다.  
  
하루 종일 일해서 무언가를 작동하게 만들어 놓고 퇴근했는데 이틑날 출근해 보면 전혀 돌아가지 않는 경험을 해본 적이 있지 않은가? 왜 작동하지 않게 
되었나? 왜냐하면 누군가 당신보다 더 늦게까지 일하면서 당신이 의존하고 있던 무언가를 수정했기 때문이다. 저자는 이러한 현상을 숙취 증후군이라고 부른다.  
  
숙취 증후군은 많은 개발자가 동일한 소스 파일을 수정하는 환경에서 발생한다. 소수의 개발자로 구성된 상대적으로 작은 프로젝트에서는 이 증후군이 그다지 
큰 문제가 되지 않는다. 하지만 프로젝트와 개발팀 규모가 커지면 숙취는 지독한 악몽이 될 수도 있다. 개발팀이 프로젝트의 안정 버전을 빌드하지 못한 채 
몇 주가 그냥 흘러가버리는 일도 드물지 않다. 빌드는 커녕 개발팀 모두가 누군가가 마지막으로 수정한 코드 떄문에 망가진 부분이 동작하도록 만들기 위해 
코드를 수정하고 또 수정하는 작업만이 계속될 뿐이다.  
  
지난 수십 년 동안 이 문제의 해결책으로 두 가지 방법이 발전되어 왔는데 이 두 해결책은 모두 통신 업계에서 만들어졌다. 첫 해결책은 주 단위 빌드(weekly build) 
이며 두 번째 해결책은 의존성 비순환 원칙(Acyclic Dependencies Principle, ADP)이다.  
  
# **주 단위 빌드(Weekly Build)**  
주 단위 빌드는 중간 규모의 프로젝트에서는 흔하게 사용된다. 주 단위 빌드를 하는 방법은 다음과 같다. 먼저 모든 개발자는 일주일의 첫 4일 동안은 서로를 
신경 쓰지 않는다. 개발자는 모두 코드를 개인적으로 복사하여 작업하며 전체적인 기준에서 작업을 어떻게 통합할지는 걱정하지 않는다. 그런 후 금요일이 되면 
변경된 코드를 모두 통합하여 시스템을 빌드한다.  
  
이 접근법은 5일 중 4일 동안 개발자를 고립된 세계에서 살 수 있게 보장해 준다는 아주 멋진 장점을 가진다. 물론 단점은 금요일에 통합과 관련된 막대한 업보를 
치러야 한다는 사실이다.  
  
안타깝게도 프로젝트가 커지면 프로젝트 통합은 금요일 하루 만에 끝마치는 게 불가능해진다. 통합이라는 짐은 점점 커지고 결국 토요일까지 넘어가기 시작한다. 
토요일까지 지연되는 현상이 반복되면 개발자는 통합을 적어도 목요일에는 시작해야 한다고 확신하게 된다. 그러면서 통합을 시작하는 날이 한 주의 중반을 
향해 슬금슬금 움직이게 된다.  
  
개발보다 통합에 드는 시간이 늘어나면서 팀의 효율성도 서서히 나빠진다. 결국 이러한 상황에 봉착하면 개발자나 프로젝트 관리자는 불만이 쌓이고 빌드를 
격주로 해야 한다고 딱 잘라 말하게 된다. 격주 빌드는 잠깐 동안은 만족스럽겠지만 프로젝트 규모가 성장하면서 통합에 드는 시간은 계속해서 늘어난다.  
  
이 같은 흐름은 마침내 위기를 초래한다. 효율성을 유지하기 위해 빌드 일정을 계속 늘려야 하고 빌드 주기가 늦어질수록 프로젝트가 감수할 위험은 커진다. 
통합과 테스트를 수행하기가 점점 더 어려워지고 팀은 빠른 피드백을 주는 장점을 잃는다.  
  
