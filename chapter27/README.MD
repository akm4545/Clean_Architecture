# **'크고 작은 모든' 서비스들**  
서비스 지향 '아키텍처'와 마이크로서비스 '아키텍처'는 최근에 큰 인기를 끌고 있다. 그 이유는 다음과 같다.  
  
- 서비스를 사용하면 상호 결합이 철저하게 분리되는 것처럼 보인다. 나중에 보겠지만 이는 일부만 맞는 말이다.  
- 서비스를 사용하면 개발과 배포 독립성을 지원하는 것처럼 보인다. 나중에 보겠지만 이 역시도 일부만 맞는 말이다.  
  
# **서비스 아키텍처?**  
먼저 서비스를 사용한다는 것이 본질적으로 아키텍처에 해당하는지에 대해 생각해 보자. 이 개념은 명백히 사실이 아니다. 시스템의 아키텍처는 의존성 규칙을 
준수하며 고수준의 정책을 저수준의 세부사항으로부터 분리하는 경계에 의해 정의된다. 단순히 애플리케이션의 행위를 분리할 분인 서비스라면 값비싼 함수 
호출에 불과하며 아키텍처 관점에서 꼭 중요하다고 볼 수는 없다.  
  
모든 서비스가 반드시 아키텍처 관점에서 중요해야만 한다는 뜻은 아니다. 기능을 프로세스나 플랫폼에 독립적이 되게끔 서비스들을 생성하면 의존성 규칙 준수 
여부와 상관없이 큰 도움이 될 때가 많다. 그러나 서비스 그 자체로는 아키텍처를 정의하지 않는다.  
  
함수들의 구성 형태도 이와 비슷하다. 모노리틱 시스템이나 컴포넌트 기반 시스템에서 아키텍처를 정의하는 요소는 바로 의존성 규칙을 따르며 아키텍처 경계를 
넘나드는 함수 호출들이다. 반면 시스템의 나머지 많은 함수들은 행위를 서로 분리할 뿐이며 아키텍처적으로는 전혀 중요하지 않다.  
  
서비스도 마찬가지다. 결국 서비스는 프로세스나 플랫폼 경계를 가로지르는 함수 호출에 지나지 않는다. 아키텍처적으로 중요한 서비스도 있지만 중요하지 
않은 서비스도 존재한다. 이 장에서 우리가 관심을 가지는 서비스는 전자다.  
  
# **서비스의 이점?**  
제목에 물음표를 단 이유는 현재 인기를 끄는 서비스 아키텍처라는 통설에 대해 이 절에서 이의를 제기할 것이기 때문이다.  
  
# **결합 분리의 오류**  
시스템을 서비스들로 분리함으로써 얻게 되리라 예상되는 큰 이점 하나는 서비스 사이의 결합이 확실히 분리된다는 점이다. 어쨌든 각 서비스는 서로 다른 
프로세스에서, 심지어는 서로 다른 프로세서에서 실행된다. 따라서 서비스는 다른 서비스의 변수에 직접 접근할 수 없다. 그리고 모든 서비스의 인터페이스는 
반드시 잘 정의되어 있어야 한다.  
  
이 말에는 어느 정도 일리가 있지만 꼭 그런 것만은 아니다. 물론 서비스는 개별 변수 수준에서는 각각 결합이 분리된다. 하지만 프로세서 내의 또는 네트워크 
상의 공유 자원 떄문에 결합될 가능성이 여전히 존재한다. 더욱이 서로 공유하는 데이터에 의해 이들 서비스는 강력하게 결합되어 버린다.  
  
예를 들어 서비스 사이를 오가는 데이터 레코드에 새로운 필드를 추가한다면 이 필드를 사용해 동작하는 모든 서비스는 반드시 변경되어야 한다. 또한 이 서비스들은 
이 필드에 담기 데이터를 해석하는 방식을 사전에 완벽하게 조율해야 한다. 따라서 서비스들은 이 데이터 레코드에 강하게 결합되고 서비스들 사이는 서로 
간접적으로 결합되어 버린다.  
  
인터페이스가 잘 정의되어 있어야 한다는 이점에 대해서라면 이는 명백히 사실이다. 하지만 함수의 경우에도 전혀 다르지 않다. 서비스 인터페이스가 함수 
인터페이스보다 더 엄밀하거나, 더 엄격하고, 더 잘 정의되는 것은 아니다. 이러한 이점은 환상에 불과하다.  
  
# **개발 및 배포 독립성의 오류**  
서비스를 사용함에 따라서 예측되는 또 다른 이점은 전담팀이 서비스를 소유하고 운영한다는 점이다. 그래서 데브옵스 전략의 일환으로 전담팀에서 각 서비스를 
작성하고, 유지보수하며, 운영하는 책임을 질 수 있다. 이러한 개발 및 배포 독립성은 확장 가능한 것으로 간주된다. 대규모 엔터프라이즈 시스템을 독립적으로 
개발하고 배포 가능한 수십, 수백, 수천 개의 서비스들을 이용하여 만들 수 있다고 믿는다. 시스템의 개발, 유지보수, 운영 또한 비슷한 수의 독립적인 팀 
단위로 분할할 수 있다고 여긴다.  
  
이러한 믿음에도 어느 정도 일리가 있지만 극히 일부일 뿐이다. 첫째로 대규모 엔터프라이즈 시스템은 서비스 기반 시스템 이외에도 모노리틱 시스템이나 
컴포넌트 기반 시스템으로도 구축할 수 있다는 사실은 역사적으로 증명되어 왔다. 따라서 서비스는 확장 가능한 시스템을 구축하는 유일한 선택지가 아니다.  
  
둘째, '결합 분리의 오류'에 따르면 서비스라고 해서 항상 독립적으로 개발, 배포, 운영할 수 있는 것은 아니다. 데이터나 행위에서 어느 정도 결합되어 
있다면 결합된 정도에 맞게 개발, 배포, 운영을 조정해야만 한다.  
  
